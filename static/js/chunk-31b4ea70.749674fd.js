(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31b4ea70"],{1712:function(t,e,n){"use strict";function a(t,e){return t.then((function(t){return[null,t]})).catch((function(t){return e&&Object.assign(t,e),[t,void 0]}))}e["a"]=a},"8aa5a":function(t,e,n){"use strict";n("e426")},e426:function(t,e,n){},fa8c:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"manage-main"},[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.listQuery.username,callback:function(e){t.$set(t.listQuery,"username",e)},expression:"listQuery.username"}}),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.deleteAll}},[t._v("清空")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.listData,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a.id))])]}}])}),n("el-table-column",{attrs:{width:"200px",align:"center",label:"用户名称"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a.username))])]}}])}),n("el-table-column",{attrs:{width:"200px",align:"center",label:"启用/禁用"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-tag",{attrs:{type:0==a.status?"danger":"success"}},[t._v(" "+t._s(0==a.status?"禁用":"启用")+" ")])]}}])}),n("el-table-column",{attrs:{width:"200px",align:"center",label:"权限"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a.userType))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"相关操作",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return["super"!=a.userType?[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.changeResetClick(a)}}},[t._v("重置密码")]),"user"==a.userType?n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(e){return t.changeAdminClick(a)}}},[t._v("权限升级")]):n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(e){return t.changeUserClick(a)}}},[t._v("权限下降")]),0==a.status?n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.changeEnableClick(a)}}},[t._v("启用")]):n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.changeDisableClick(a)}}},[t._v("禁用")])]:n("el-tag",[t._v(" 最高权限管理员 ")])]}}])})],1)],1)},i=[],s=n("c7eb"),c=n("3835"),l=n("1da1"),r=(n("d81d"),n("caad"),n("2532"),n("1712")),u=n("b775");function o(){return Object(u["a"])({url:"/user/list",method:"get"})}function d(t){return Object(u["a"])({url:"/admin/type/user",method:"post",data:{id:t}})}function f(t){return Object(u["a"])({url:"/admin/type/admin",method:"post",data:{id:t}})}function m(t){return Object(u["a"])({url:"/admin/status/enable",method:"post",data:{id:t}})}function h(t){return Object(u["a"])({url:"/admin/status/disable",method:"post",data:{id:t}})}function p(t){return Object(u["a"])({url:"/admin/password/reset",method:"post",data:{id:t}})}var b={data:function(){return{listData:[],listLoading:!0,listQuery:{username:"",page:1,limit:10}}},props:[],components:{},created:function(){this.getList()},mounted:function(){},methods:{getList:function(){var t=this;return Object(l["a"])(Object(s["a"])().mark((function e(){var n,a,i,l;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.listLoading=!0,e.next=3,Object(r["a"])(o());case 3:n=e.sent,a=Object(c["a"])(n,2),a[0],i=a[1],l=i.data,t.listData=l,t.listLoading=!1;case 10:case"end":return e.stop()}}),e)})))()},allClick:function(t,e){var n=this;t.then((function(t){n.$message({message:e,type:"success"}),n.getList()})).catch((function(t){}))},changeUserClick:function(t){this.allClick(d(t.id),"".concat(t.username,"的权限调整为user了"))},changeAdminClick:function(t){this.allClick(f(t.id),"".concat(t.username,"的权限调整为admin了"))},changeDisableClick:function(t){this.allClick(h(t.id),"".concat(t.username,"已被禁用！"))},changeEnableClick:function(t){this.allClick(m(t.id),"".concat(t.username,"已被激活！"))},changeResetClick:function(t){this.allClick(p(t.id),"".concat(t.username,"的密码已被重置"))},deleteAll:function(){this.listQuery.username="",this.getList()},handleFilter:function(){var t=this;if(this.listQuery.username){var e=[];this.listData.map((function(n,a){n.username.includes(t.listQuery.username)&&e.push(n)})),this.listData=e}else this.getList()}}},g=b,k=(n("8aa5a"),n("2877")),v=Object(k["a"])(g,a,i,!1,null,null,null);e["default"]=v.exports}}]);